global:
  spire:
    # Explicitly set the trust domain
    trustDomain: "example.org"

spire-agent:
  csi:
    enabled: true
    driverClass: "csi.spiffe.io"

# This section fixes the "wrong type" crash by explicitely defining the config
spire-server:
  # Explicitly set the JWT Issuer to match the K8s service URL so Keycloak accepts it
  jwtIssuer: "https://spire-spiffe-oidc-discovery-provider.spire-server.svc.cluster.local"
  controllerManager:
    enabled: true
    serviceAccount:
      create: true
      name: spire-controller-manager
    # We define this to satisfy the template logic
    identities:
      clusterSPIFFEIDs:
        enabled: true
